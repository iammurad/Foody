@model List<Product>
<div id="section-container" class="container-xxl py-5">
	<div class="container">
		<div class="row g-0 gx-5 align-items-end">
			
			<div class="col-lg-6">
				<div class="section-header text-start mb-5 wow fadeInUp" data-wow-delay="0.1s" style="max-width: 500px;">
					<h1 class="display-5 mb-3">Our Products</h1>
					<p>Tempor ut dolore lorem kasd vero ipsum sit eirmod sit. Ipsum diam justo sed rebum vero dolor duo.</p>
				</div>
			</div>
			@await Component.InvokeAsync("_DefaultCategorySectionComponentPartial")
		</div>
		<div class="tab-content">
			<div id="tab-1" class="tab-pane fade show p-0 active">
				<div class="row g-4" id="product-container">
					@if (Model != null && Model.Any())
					{
						@foreach (var item in Model)
						{
							<div class="col-xl-3 col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.1s" >
								<div class="product-item">
									<div class="position-relative bg-light overflow-hidden">
										<img class="img-fluid w-100" src="/webui/img/@item.ImageUrl" alt="">
										<div class="bg-secondary rounded text-white position-absolute start-0 top-0 m-4 py-1 px-3">@item.Category.CategoryName</div>
									</div>
									<div class="text-center p-4">
										<a class="d-block h5 mb-2" href="">@item.ProductName</a>
										<span class="text-primary me-1">$ @item.Price </span>
										<span class="text-body text-decoration-line-through">$0.00</span>
									</div>
									<div class="d-flex border-top">
										<small class="w-50 text-center border-end py-2">
											<a class="text-body" href=""><i class="fa fa-eye text-primary me-2"></i>View detail</a>
										</small>
										<small class="w-50 text-center py-2">
											<a class="text-body" href=""><i class="fa fa-shopping-bag text-primary me-2"></i>Add to cart</a>
										</small>
									</div>
								</div>
							</div>

						}
					}
					else
					{
						<div class="col-12 text-center">
							<p>No products found for this category.</p>
						</div>
					}
					<div class="col-12 text-center wow fadeInUp" data-wow-delay="0.1s">
						<a class="btn btn-primary rounded-pill py-3 px-5" href="">Browse More Products</a>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

<script>
	$(document).ready(function () {
		$('.category-btn').click(function () {
			var categoryId = $(this).data('category-id');

			$.ajax({
				url: '/Default/LoadProductsByCategory',
				type: 'GET',
				data: { categoryId: categoryId },
				success: function (result) {
				const trimmed = $.trim(result);
				if (trimmed === '') {
					$('#product-container').html("<div class='col-12 text-center'><p>No products found.</p></div>");
				} else {
					console.log(trimmed);
					$('section-container').empty();
					$('#product-container').html(trimmed);
				}
	}
			});
			// Update active state
			$('.category-btn').removeClass('active');
			$(this).addClass('active');
		});
	});
</script>